{"version":3,"sources":["components/Layout/Lazyload/index.tsx","components/Image/ImageItem.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","contants/index.ts","hooks/useResponseImage.ts","components/Home/index.tsx","components/Image/image.module.scss"],"names":["Lazyload","children","props","useState","isShow","setShow","divRef","useRef","useEffect","observer","IntersectionObserver","entry","isIntersecting","root","rootMargin","threshold","current","observe","disconnect","ref","ImageItem","item","id","width","height","left","top","url","download_url","className","styles","style","transform","src","alt","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","BREAKPOINTS","items","useResponseImage","data","screenWidth","useMemo","images","breakpoint","find","length","w","i","Math","min","h","j","Home","setData","setScreenWidth","listRef","a","axios","get","response","run","getWidth","getBoundingClientRect","window","addEventListener","removeEventListener","listItem","map","image","module","exports"],"mappings":"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","file":"static/js/4.93eb0c6f.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\ntype TProps = React.HTMLAttributes<HTMLElement>;\n\nconst Lazyload: React.FC<TProps> = ({ children, ...props }) => {\n  const [isShow, setShow] = useState<boolean>(false);\n  const divRef = useRef(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setShow(entry.isIntersecting);\n      },\n      {\n        root: null,\n        rootMargin: '0px',\n        threshold: 0,\n      },\n    );\n    if (divRef.current) observer.observe(divRef.current);\n    return () => observer.disconnect();\n  }, [divRef]);\n  return (\n    <div {...props} ref={divRef}>\n      {isShow && children}\n    </div>\n  );\n};\nexport default Lazyload;\n","import React from 'react';\nimport Lazyload from 'src/components/Layout/Lazyload';\nimport { TImage } from 'src/types/image.type';\n\nimport styles from './image.module.scss';\n\nconst ImageItem: React.FC<{ item: TImage }> = ({ item }) => {\n  // eslint-disable-next-line object-curly-newline\n  const { id, width, height, left, top, download_url: url } = item;\n  return (\n    <div\n      key={id}\n      className={styles.item}\n      style={{\n        width: `${width}px`,\n        height: `${height}px`,\n        transform: `translate(${left}px, ${top}px)`,\n      }}\n    >\n      <Lazyload>\n        <img src={url} className=\"img-fluid\" alt=\"\" />\n      </Lazyload>\n    </div>\n  );\n};\nexport default ImageItem;\n","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export const BREAKPOINTS = [\n  {\n    width: 1200,\n    items: 6,\n  },\n  {\n    width: 996,\n    items: 5,\n  },\n  {\n    width: 768,\n    items: 4,\n  },\n  {\n    width: 480,\n    items: 3,\n  },\n  {\n    width: 0,\n    items: 2,\n  },\n];\n\nexport const MARGIN = 10;\n","import { useMemo } from 'react';\n\nimport { BREAKPOINTS, MARGIN } from '../contants';\nimport { TImage } from '../types/image.type';\n\nconst useResponseImage = (data: TImage[], screenWidth: number) => {\n  return useMemo(() => {\n    const images = [...data];\n    const breakpoint = BREAKPOINTS.find((item) => screenWidth >= item.width);\n    if (breakpoint && images.length > 0) {\n      const w = (screenWidth - (breakpoint.items - 1) * MARGIN) / breakpoint.items;\n      for (let i = 0; i < Math.min(breakpoint.items, images.length); i += 1) {\n        const h = (w / images[i].width) * images[i].height;\n        images[i].width = w;\n        images[i].height = h;\n        images[i].top = 0;\n        if (i === 0) images[i].left = 0;\n        else images[i].left = (images[i - 1].left || 0) + images[i - 1].width + MARGIN;\n        for (let j = i + breakpoint.items; j < images.length; j += breakpoint.items) {\n          const height = (w / images[j].width) * images[j].height;\n          images[j].width = w;\n          images[j].height = height;\n          images[j].left = images[i].left;\n          const top = (images[j - breakpoint.items].top || 0) + images[j - breakpoint.items].height;\n          images[j].top = top + MARGIN;\n        }\n      }\n      return images;\n    }\n    return [];\n  }, [data, screenWidth]);\n};\nexport default useResponseImage;\n","import axios from 'axios';\nimport { useEffect, useRef, useState } from 'react';\nimport ImageItem from 'src/components/Image/ImageItem';\nimport useResponseImage from 'src/hooks/useResponseImage';\nimport { TImage } from 'src/types/image.type';\n\nconst Home = () => {\n  const [data, setData] = useState<TImage[]>([]);\n  const [screenWidth, setScreenWidth] = useState<number>(0);\n  const listRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const run = async () => {\n      const response = await axios.get('https://picsum.photos/v2/list?limit=6');\n      setData(response.data);\n    };\n    run();\n  }, []);\n\n  const getWidth = () => {\n    if (listRef.current) {\n      const clientWidth = listRef.current.getBoundingClientRect().width;\n      return clientWidth;\n    }\n    return 0;\n  };\n  useEffect(() => {\n    setScreenWidth(getWidth());\n    window.addEventListener('resize', () => {\n      setScreenWidth(getWidth());\n    });\n    return window.removeEventListener('resize', () => {});\n  }, [data, listRef]);\n\n  const listItem = useResponseImage(data, screenWidth);\n  return (\n    <div ref={listRef} className=\"list-image\">\n      {listItem.map((image) => (\n        <ImageItem key={image.id} item={image} />\n      ))}\n    </div>\n  );\n};\n\nexport default Home;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"image_item__2SPf0\"};"],"sourceRoot":""}